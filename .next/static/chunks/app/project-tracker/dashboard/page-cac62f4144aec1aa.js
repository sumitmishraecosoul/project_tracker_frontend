(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[834],{883:(e,s,t)=>{"use strict";t.d(s,{fn:()=>i,gg:()=>l,lk:()=>a,lx:()=>n,uy:()=>r});let r=["Supply Chain-Operations","Human Resources and Administration","New Product Design","India E-commerce","Supply Chain","Data Analytics","E-commerce","Retail E-commerce","Finance & Accounts","Zonal Sales (India)- HORECA","Zonal Sales (India)","Supply Chain & Operation","Zonal Sales","Digital Marketing"],a="India E-commerce",l=["admin","manager","employee"],n="employee",i={admin:"Administrator",manager:"Manager",employee:"Employee"}},1265:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>m});var r=t(5155),a=t(2115),l=t(6874),n=t.n(l),i=t(7288),c=t(5802),d=t(7296),o=t(883);function m(){let[e,s]=(0,a.useState)({activeProjectsCount:0,totalTasksCount:0,inProgressTasksCount:0,completedTasksCount:0,totalTeamMembersCount:0,totalProjectsCount:0,pendingTasksCount:0,overdueTasksCount:0}),[t,l]=(0,a.useState)([]),[m,x]=(0,a.useState)({completed:0,inProgress:0,total:0}),[h,u]=(0,a.useState)([]),[g,j]=(0,a.useState)(!0),[p,b]=(0,a.useState)(""),[f,N]=(0,a.useState)(null),[v,y]=(0,a.useState)("All Departments"),[w,k]=(0,a.useState)([]),[C,T]=(0,a.useState)(!1);(0,a.useEffect)(()=>{let e=localStorage.getItem("currentUser");if(e){let s=JSON.parse(e);N(s),"admin"===s.role&&(s.department?y(s.department):y("All Departments"))}},[]);let P=async()=>{try{if((null==f?void 0:f.role)==="admin"){let e=await d.K.getDepartments();k(e)}}catch(e){console.error("Error fetching departments:",e)}};(0,a.useEffect)(()=>{f&&(P(),S())},[f,v]);let S=async()=>{j(!0),b("");try{let e={};(null==f?void 0:f.role)==="admin"&&(e.department=v);let t=await d.K.getDashboardSummary(e);try{let e;if((null==f?void 0:f.role)==="admin")if("All Departments"===v)e=await d.K.getUsers();else{let s=await d.K.getUsers();e=Array.isArray(s)?s.filter(e=>e.department===v):[]}else e=await d.K.getMyTeam();u(Array.isArray(e)?e:[])}catch(e){console.error("Failed to fetch team data:",e),u([])}if(!t||"object"!=typeof t)throw Error("Invalid dashboard data received");s({activeProjectsCount:t.activeProjectsCount||0,totalTasksCount:t.totalTasksCount||0,inProgressTasksCount:t.inProgressTasksCount||0,completedTasksCount:t.completedTasksCount||0,totalTeamMembersCount:t.totalTeamMembersCount||0,totalProjectsCount:t.totalProjectsCount||0,pendingTasksCount:t.pendingTasksCount||0,overdueTasksCount:t.overdueTasksCount||0}),l(t.recentProjects||[]),x(t.taskProgress||{completed:0,inProgress:0,total:0})}catch(e){console.error("Failed to fetch dashboard data:",e),b(e instanceof Error?e.message:"Failed to load dashboard data"),s({activeProjectsCount:0,totalTasksCount:0,inProgressTasksCount:0,completedTasksCount:0,totalTeamMembersCount:0,totalProjectsCount:0,pendingTasksCount:0,overdueTasksCount:0}),l([]),x({completed:0,inProgress:0,total:0})}finally{j(!1)}},A=e=>{switch(e){case"Active":return"bg-green-100 text-green-800";case"In Progress":return"bg-yellow-100 text-yellow-800";case"Completed":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}};return g?(0,r.jsx)(c.A,{children:(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)(i.A,{}),(0,r.jsx)("div",{className:"flex items-center justify-center min-h-[60vh]",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Loading dashboard..."})]})})]})}):(0,r.jsx)(c.A,{children:(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)(i.A,{}),(0,r.jsx)("div",{className:"px-6 py-8",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,r.jsx)("div",{className:"mb-8",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Dashboard"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Overview of your projects and tasks"}),f&&(0,r.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["Role: ",f.role," • Department: ",f.department]}),(null==f?void 0:f.role)==="admin"&&"All Departments"!==v&&(0,r.jsx)("div",{className:"mt-2",children:(0,r.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800",children:[(0,r.jsx)("i",{className:"ri-filter-line mr-1"}),"Filtered by: ",v]})})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(null==f?void 0:f.role)==="admin"&&(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Department:"}),(0,r.jsxs)("select",{value:v,onChange:e=>y(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,r.jsx)("option",{value:"All Departments",children:"All Departments"}),(w.length>0?w:o.uy).map(e=>(0,r.jsx)("option",{value:e,children:e},e))]})]}),(0,r.jsxs)("button",{onClick:S,disabled:g,className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[(0,r.jsx)("i",{className:"ri-refresh-line mr-2 ".concat(g?"animate-spin":"")}),g?"Refreshing...":"Refresh"]})]})]})}),p&&(0,r.jsx)("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm",children:p}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mr-4",children:(0,r.jsx)("i",{className:"ri-folder-line text-blue-600 text-xl"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Active Projects"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:e.activeProjectsCount})]})]})}),(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mr-4",children:(0,r.jsx)("i",{className:"ri-checkbox-line text-green-600 text-xl"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Tasks"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:e.totalTasksCount})]})]})}),(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center mr-4",children:(0,r.jsx)("i",{className:"ri-time-line text-yellow-600 text-xl"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"In Progress"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:e.inProgressTasksCount})]})]})}),(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center mr-4",children:(0,r.jsx)("i",{className:"ri-team-line text-purple-600 text-xl"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Team Members"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:e.totalTeamMembersCount})]})]})})]}),h.length>0&&(0,r.jsx)("div",{className:"mb-8",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[(0,r.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:(null==f?void 0:f.role)==="admin"&&"All Departments"!==v?"".concat(v," Team Members"):"My Team"}),h.length>5&&(0,r.jsx)("button",{onClick:()=>T(!C),className:"flex items-center text-sm text-blue-600 hover:text-blue-800 font-medium",children:C?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("i",{className:"ri-arrow-up-s-line mr-1"}),"Show Less"]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("i",{className:"ri-arrow-down-s-line mr-1"}),"Show All (",h.length,")"]})})]})}),(0,r.jsx)("div",{className:"p-6",children:(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:(C?h:h.slice(0,5)).map(e=>(0,r.jsx)("div",{className:"bg-gray-50 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center mr-3",children:(0,r.jsx)("span",{className:"text-blue-600 font-medium text-sm",children:e.name.charAt(0).toUpperCase()})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-medium text-gray-900",children:e.name}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:e.email}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 capitalize",children:[o.fn[e.role]||e.role," • ",e.department]})]})]})},e._id))})})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[(0,r.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Recent Projects"})}),(0,r.jsxs)("div",{className:"p-6",children:[0===t.length?(0,r.jsx)("p",{className:"text-gray-500 text-center py-8",children:"No projects found"}):(0,r.jsx)("div",{className:"space-y-4",children:t.map(e=>(0,r.jsx)("div",{className:"bg-gray-50 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h3",{className:"font-medium text-gray-900 mb-1",children:e.title}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:e.description}),(0,r.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[(0,r.jsxs)("span",{className:"flex items-center",children:[(0,r.jsx)("i",{className:"ri-building-line w-3 h-3 mr-1"}),e.department||"No Department"]}),(0,r.jsxs)("span",{className:"flex items-center",children:[(0,r.jsx)("i",{className:"ri-team-line w-3 h-3 mr-1"}),e.activeMembersCount||0," active members"]})]})]}),(0,r.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(A(e.status)),children:e.status})]})},e._id))}),(0,r.jsx)("div",{className:"mt-4",children:(0,r.jsx)(n(),{href:"/project-tracker",className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"View all projects →"})})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[(0,r.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Task Progress"})}),(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Completed Tasks"}),(0,r.jsxs)("span",{className:"text-sm text-gray-500",children:[m.completed,"/",m.total]})]}),(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,r.jsx)("div",{className:"bg-green-600 h-2 rounded-full transition-all duration-300",style:{width:m.total>0?"".concat(m.completed/m.total*100,"%"):"0%"}})})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"In Progress Tasks"}),(0,r.jsxs)("span",{className:"text-sm text-gray-500",children:[m.inProgress,"/",m.total]})]}),(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,r.jsx)("div",{className:"bg-orange-500 h-2 rounded-full transition-all duration-300",style:{width:m.total>0?"".concat(m.inProgress/m.total*100,"%"):"0%"}})})]})]}),(0,r.jsx)("div",{className:"mt-4",children:(0,r.jsx)(n(),{href:"/task-tracker",className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"View all tasks →"})})]})]})]})]})})]})})}},5802:(e,s,t)=>{"use strict";t.d(s,{A:()=>n});var r=t(5155),a=t(2115),l=t(5695);function n(e){let{children:s}=e,[t,n]=(0,a.useState)(!1),[i,c]=(0,a.useState)(!0),d=(0,l.useRouter)();return((0,a.useEffect)(()=>{console.log("ProtectedRoute: Checking authentication...");let e=localStorage.getItem("currentUser"),s=localStorage.getItem("token");if(console.log("ProtectedRoute: User exists:",!!e),console.log("ProtectedRoute: Token exists:",!!s),e&&s)console.log("ProtectedRoute: User authenticated, setting state..."),n(!0);else{console.log("ProtectedRoute: No user or token, redirecting to login..."),d.push("/login");return}c(!1)},[d]),i)?(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("i",{className:"ri-loader-4-line animate-spin text-2xl text-blue-600"}),(0,r.jsx)("span",{className:"text-gray-600",children:"Loading..."})]})}):t?(0,r.jsx)(r.Fragment,{children:s}):null}},7288:(e,s,t)=>{"use strict";t.d(s,{A:()=>c});var r=t(5155),a=t(6874),l=t.n(a),n=t(5695),i=t(2115);function c(){let e=(0,n.usePathname)(),s=(0,n.useRouter)(),[t,a]=(0,i.useState)(null);return(0,i.useEffect)(()=>{let e=localStorage.getItem("currentUser");e&&a(JSON.parse(e))},[]),(0,r.jsx)("header",{className:"bg-gradient-to-r from-blue-600 to-purple-600 shadow-lg border-b border-blue-500",children:(0,r.jsx)("div",{className:"px-6 py-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("div",{className:"flex items-center",children:(0,r.jsx)("h1",{className:"text-2xl font-bold text-white tracking-wide",children:"Project Tracker"})}),(0,r.jsx)("nav",{className:"flex items-center space-x-2",children:[{name:"Dashboard",path:"/project-tracker/dashboard"},{name:"Project Tracker",path:"/project-tracker"},{name:"Task Tracker",path:"/task-tracker"}].map(s=>{var t;let a="/project-tracker/dashboard"===(t=s.path)?"/project-tracker/dashboard"===e||e.startsWith("/project-tracker/dashboard/"):"/project-tracker"===t?"/project-tracker"===e||e.startsWith("/project-tracker/")&&!e.startsWith("/project-tracker/dashboard"):e===t||e.startsWith(t+"/");return(0,r.jsx)(l(),{href:s.path,className:"px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap cursor-pointer transition-all duration-200 ".concat(a?"bg-white text-blue-600 shadow-md transform scale-105":"text-blue-100 hover:text-white hover:bg-white/20 hover:shadow-md"),children:s.name},s.path)})}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)(l(),{href:"/",className:"px-4 py-2 rounded-lg text-sm font-medium text-blue-100 hover:text-white hover:bg-white/20 transition-all duration-200 whitespace-nowrap",children:[(0,r.jsx)("i",{className:"ri-arrow-left-line mr-2"}),"Back to Portal"]}),t&&(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"text-sm text-blue-100 hidden sm:block",children:(0,r.jsx)("span",{className:"font-semibold",children:t.name})}),(0,r.jsxs)("button",{onClick:()=>{localStorage.removeItem("currentUser"),localStorage.removeItem("token"),s.push("/login")},className:"flex items-center px-4 py-2 bg-red-500 hover:bg-red-600 text-white text-sm font-medium rounded-lg transition-all duration-200 hover:shadow-lg transform hover:scale-105 cursor-pointer whitespace-nowrap",children:[(0,r.jsx)("i",{className:"ri-logout-box-line mr-2"}),"Logout"]})]})]})]})})})}},9125:(e,s,t)=>{Promise.resolve().then(t.bind(t,1265))}},e=>{var s=s=>e(e.s=s);e.O(0,[244,296,441,684,358],()=>s(9125)),_N_E=e.O()}]);